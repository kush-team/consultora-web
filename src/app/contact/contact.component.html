<div *ngIf="submitted else formTemplate" data-aos="fade-in" data-aos-once=true class="flex flex-col w-full max-w-xl p-24 mx-auto shadow-xl items-center">
  <div *ngIf="!loading else loadingTemplate" class="bg-green-100 border-t-4 border-green-500 rounded-b text-green-900 px-4 py-3 shadow-md" role="alert">
    <div class="py-1"><svg class="fill-current h-6 w-6 text-green-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
    <div>
      <p class="font-bold">Formulado enviado!</p>
      <p class="text-sm">Gracias por ponerte en contacto con nostros! Te responderemos a la brevedad</p>
    </div>
  </div>
</div>

<ng-template #loadingTemplate>
    <span class="text-green-500 opacity-75 mx-auto" >
      <i class="fas fa-circle-notch fa-spin fa-5x"></i>
    </span>
</ng-template>

<ng-template #formTemplate>
  <form id="contact-form" class="flex flex-col w-full max-w-xl p-24 mx-auto shadow-xl" #lForm="ngForm" [formGroup]="contactForm" (ngSubmit)="submit()" novalidate>
    <h2 class="mb-12 text-3xl text-center">
      Contactanos
    </h2>
    <div class="flex flex-wrap mb-6 -mx-3">
      <div class="w-full px-3">
        <label class="block mb-2 text-xs font-bold tracking-wide text-gray-700 uppercase" for="grid-password">
          Nombre
        </label>
        <input matInput formControlName="name" class="block w-full px-4 py-3 mb-3 leading-tight text-gray-700 bg-gray-200 border border-gray-200 rounded appearance-none focus:outline-none focus:bg-white focus:border-gray-500" id="nick" type="text">
        <div *ngIf="contactForm.controls['name'].invalid && (contactForm.controls['name'].dirty || contactForm.controls['name'].touched)" class="alert">
          <div class="py-4 pr-4 text-xs font-bold text-red-500" *ngIf="contactForm.controls['name'].errors.required">
             Debe ingresar un nombre.
          </div>
        </div>
      </div>
    </div>
    <div class="flex flex-wrap mb-6 -mx-3">
      <div class="w-full px-3">
        <label class="block mb-2 text-xs font-bold tracking-wide text-gray-700 uppercase" for="grid-password">
          E-mail
        </label>
        <input matInput formControlName="emailAddress" class="block w-full px-4 py-3 mb-3 leading-tight text-gray-700 bg-gray-200 border border-gray-200 rounded appearance-none focus:outline-none focus:bg-white focus:border-gray-500" id="email" type="email">
        <div *ngIf="contactForm.controls['emailAddress'].invalid && (contactForm.controls['emailAddress'].dirty || contactForm.controls['emailAddress'].touched)" class="alert">
          <div class="py-4 pr-4 text-xs font-bold text-red-500" *ngIf="contactForm.controls['emailAddress'].errors.required || contactForm.controls['emailAddress'].errors.email">
            Debe ingresar email.
          </div>
        </div>
      </div>
    </div>
    <div class="flex flex-wrap mb-6 -mx-3">
      <div class="w-full px-3">
        <label class="block mb-2 text-xs font-bold tracking-wide text-gray-700 uppercase" for="grid-password">
          Mensaje
        </label>
        <textarea matInput formControlName="message" class="block w-full h-48 px-4 py-3 mb-3 leading-tight text-gray-700 bg-gray-200 border border-gray-200 rounded appearance-none resize-none no-resize focus:outline-none focus:bg-white focus:border-gray-500" id="message"></textarea>
        <div *ngIf="contactForm.controls['message'].invalid && (contactForm.controls['message'].dirty || contactForm.controls['message'].touched)" class="alert">
          <div class="py-4 pr-4 text-xs font-bold text-red-500">
            El mensaje debe tener al menos 100 car√°cteres.
          </div>
        </div>
      </div>
    </div>
    <div class="md:flex md:items-center">
      <div class="md:w-1/3">
        <button mat-raised-button [disabled]="!contactForm.valid" type="submit" form="contact-form"  class="px-4 py-2 font-bold text-white bg-gray-900 rounded shadow hover:bg-teal-400 focus:shadow-outline focus:outline-none">
          Enviar
        </button>
      </div>
    </div>
  </form>
</ng-template>

